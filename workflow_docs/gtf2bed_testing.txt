
# DOESNT WORK - too many parsing errors :(
ml singularity
singularity pull --dir ~/singularity https://depot.galaxyproject.org/singularity/bedops%3A2.4.39--hc9558a2_0
DIR="PATH/TO/DIR/WITH/GTF"
singularity shell -B ${DIR}:/data ~/singularity/bedops%3A2.4.39--hc9558a2_0
cd /data
GTF_FILE="genes.gtf"
cat $GTF_FILE | grep -Ev "^#" | awk '{ if ($0 ~ "transcript_id") print $0; else print $0" transcript_id \"\";"; }'  | gtf2bed - > ${GTF_FILE}.bed


# If this works - this needs to be a submodule 
ml singularity
singularity pull --dir ~/singularity https://depot.galaxyproject.org/singularity/ucsc-gtftogenepred%3A377--ha8a8165_5
DIR="PATH/TO/GTF/DIR"
singularity shell -B $DIR:/data ~/singularity/ucsc-gtftogenepred%3A377--ha8a8165_5 
GTF_FILE="genes.gtf"
gtfToGenePred $GTF_FILE ${GTF_FILE}.genePred 

singularity pull --dir ~/singularity https://depot.galaxyproject.org/singularity/ucsc-genepredtobed%3A377--ha8a8165_5
singularity shell -B ${DIR}:/data ucsc-genepredtobed%3A377--ha8a8165_5 
cd /data
GTF_FILE="genes.gtf"
genePredToBed ${GTF_FILE}.genePred ${GTF_FILE}.bed 
sort -k1,1 -k2,2n ${GTF_FILE}.bed  > ${GTF_FILE}.sort.bed

